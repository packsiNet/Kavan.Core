# ๐ ูุณุชูุฏุงุช ฺฉุงูู ุณุฑูุณโูุง ฺูุฑูุงู ูุนุงููุงุช (Trading Journal)

ุงู ูุณุชูุฏุงุช ุจุฑ ุงุณุงุณ ุขุฎุฑู ูพุงุฏูโุณุงุฒ ุณุฑูุณโูุง ุชูู ุดุฏู ุงุณุช. ุชูุงู ุฏุฑุฎูุงุณุชโูุง ุจุงุฏ ุฏุงุฑุง ูุฏุฑ `Authorization: Bearer <token>` ุจุงุดูุฏ. ุณุณุชู ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุฏุงุฏูโูุง ุฑุง ุจุฑ ุงุณุงุณ `UserAccountId` ููุชุฑ ูโฺฉูุฏ.

---

## 1. ุณุฑูุณ ุฏูุฑูโูุง ูุงู (Financial Periods)
ุงู ุณุฑูุณ ูุธูู ูุฏุฑุช ุฏูุฑูโูุง ูุนุงููุงุช (ุฑูุฒุงููุ ููุชฺฏุ ูุงูุงูู) ุฑุง ุจุฑ ุนูุฏู ุฏุงุฑุฏ.

### **1.1. ุงุฌุงุฏ ุฏูุฑู ูุงู ุฌุฏุฏ**
*   **ุชูุถุญุงุช:** ุงุฌุงุฏ ฺฉ ุฏูุฑู ูุงู ุฌุฏุฏ ุจุฑุง ฺฉุงุฑุจุฑ. ุงฺฏุฑ ุฏูุฑู ูุนุงู ูุฌูุฏ ุฏุงุดุชู ุจุงุดุฏุ ุฎุทุง ุจุงุฒูโฺฏุฑุฏุงูุฏ.
*   **ูุชุฏ:** `POST`
*   **ุขุฏุฑุณ:** `/api/financial-periods`
*   **ูุฏู ูุฑูุฏ (Body):**
    ```json
    {
      "startDateUtc": "2025-01-01T00:00:00Z",
      "endDateUtc": "2025-01-31T23:59:59Z",
      "periodType": 1 // ููุงุฏุฑ: 1 (ุฑูุฒุงูู)ุ 2 (ููุชฺฏ)ุ 3 (ูุงูุงูู)ุ 4 (ุณุงูุงูู)
    }
    ```
*   **ุฎุฑูุฌ (Response):**
    ```json
    {
      "id": 1,
      "userId": 1001,
      "startDateUtc": "2025-01-01T00:00:00Z",
      "endDateUtc": "2025-01-31T23:59:59Z",
      "periodType": 1,
      "periodTypeName": "Daily",
      "isClosed": false,
      "createdAt": "2025-01-01T10:00:00Z"
    }
    ```

### **1.2. ุฏุฑุงูุช ุฏูุฑู ูุนุงู**
*   **ุชูุถุญุงุช:** ุจุงุฒฺฏุฑุฏุงูุฏู ุฏูุฑู ูุงู ุฌุงุฑ ฺฉุงุฑุจุฑ ฺฉู ูููุฒ ุจุณุชู ูุดุฏู ุงุณุช.
*   **ูุชุฏ:** `GET`
*   **ุขุฏุฑุณ:** `/api/financial-periods/active`
*   **ูุฏู ูุฑูุฏ:** ูุฏุงุฑุฏ.
*   **ุฎุฑูุฌ (Response):** ูุดุงุจู ุฎุฑูุฌ ุงุฌุงุฏ ุฏูุฑู.

### **1.3. ุจุณุชู ุฏูุฑู ูุงู**
*   **ุชูุถุญุงุช:** ูพุงุงู ุฏุงุฏู ุจู ุฏูุฑู ูุงู ุฌุงุฑ.
*   **ูุชุฏ:** `POST`
*   **ุขุฏุฑุณ:** `/api/financial-periods/{id}/close`
*   **ูพุงุฑุงูุชุฑ ูุณุฑ:** `id` (ุดูุงุณู ุฏูุฑู)
*   **ุฎุฑูุฌ (Response):** ูุดุงุจู ุฎุฑูุฌ ุงุฌุงุฏ ุฏูุฑู (ุจุง `isClosed: true`).

---

## 2. ุณุฑูุณ ูุนุงููุงุช (Trades)
ูุฏุฑุช ฺุฑุฎู ุนูุฑ ูุนุงููุงุช. ุชูุงู ูุนุงููุงุช ุจู ุฏูุฑู ูุงู ูุนุงู ฺฉุงุฑุจุฑ ูุชุตู ูโุดููุฏ.

### **2.1. ุซุจุช ูุนุงููู ุฌุฏุฏ**
*   **ุชูุถุญุงุช:** ุซุจุช ฺฉ ูพูุฒุดู ุฌุฏุฏ.
*   **ูุชุฏ:** `POST`
*   **ุขุฏุฑุณ:** `/api/trades`
*   **ูุฏู ูุฑูุฏ (Body):**
    ```json
    {
      "symbol": "BTCUSDT",
      "side": 1, // 1: Long, 2: Short
      "entryPrice": 45000,
      "stopLoss": 44000,
      "takeProfits": [46000, 48000],
      "quantity": 0.5,
      "leverage": 10,
      "confidenceLevel": 85,
      "emotionBeforeEntry": "Hopeful",
      "planCompliance": true
    }
    ```
*   **ุฎุฑูุฌ (Response):**
    ```json
    {
      "id": 50,
      "userId": 1001,
      "symbol": "BTCUSDT",
      "side": 1,
      "sideName": "Long",
      "entryPrice": 45000,
      "stopLoss": 44000,
      "takeProfits": [
        { "price": 46000, "isHit": false },
        { "price": 48000, "isHit": false }
      ],
      "quantity": 0.5,
      "leverage": 10,
      "status": 1,
      "statusName": "Open",
      "openedAtUtc": "2025-01-10T12:00:00Z",
      "closedAtUtc": null,
      "financialPeriodId": 1,
      "emotion": {
        "confidenceLevel": 85,
        "emotionBeforeEntry": "Hopeful",
        "planCompliance": true
      },
      "result": { ... } // ููุงุฏุฑ ุฎุงู ุจุฑุง ูุนุงููู ุจุงุฒ
    }
    ```

### **2.2. ุฏุฑุงูุช ูุณุช ูุนุงููุงุช ฺฉ ุฏูุฑู**
*   **ุชูุถุญุงุช:** ูุณุช ุชูุงู ูุนุงููุงุช ุซุจุช ุดุฏู ุฏุฑ ฺฉ ุฏูุฑู ุฎุงุต.
*   **ูุชุฏ:** `GET`
*   **ุขุฏุฑุณ:** `/api/trades/period/{periodId}`
*   **ูพุงุฑุงูุชุฑ ูุณุฑ:** `periodId`
*   **ุฎุฑูุฌ:** ุขุฑุงูโุง ุงุฒ ุขุจุฌฺฉุชโูุง `TradeDto`.

### **2.3. ุจุณุชู ุฏุณุช ูุนุงููู (Market Close)**
*   **ุชูุถุญุงุช:** ุจุณุชู ูุนุงููู ุจุง ููุช ูุญุธูโุง ุจุงุฒุงุฑ.
*   **ูุชุฏ:** `POST`
*   **ุขุฏุฑุณ:** `/api/trades/{id}/close`
*   **ูพุงุฑุงูุชุฑ ูุณุฑ:** `id` (ุดูุงุณู ูุนุงููู)
*   **ุฎุฑูุฌ:** `TradeDto` ุจุง ูุถุนุช `Closed` ู ูุญุงุณุจู PnL.

### **2.4. ูุบู ูุนุงููู (Cancel)**
*   **ุชูุถุญุงุช:** ูุบู ูุนุงูููโุง ฺฉู ูููุฒ ุจุงุฒ ุงุณุช (Order Cancelled).
*   **ูุชุฏ:** `POST`
*   **ุขุฏุฑุณ:** `/api/trades/{id}/cancel`
*   **ูุฏู ูุฑูุฏ (Body):**
    ```json
    {
      "reason": "Price moved away"
    }
    ```
*   **ุฎุฑูุฌ:** `true` ุฏุฑ ุตูุฑุช ููููุช.

### **2.5. ูุฑุงุด ูุนุงููู**
*   **ุชูุถุญุงุช:** ูุฑุงุด ูพุงุฑุงูุชุฑูุง ุฑุณฺฉ (SL/TP) ุง ุงุฏุฏุงุดุชโูุง ุฑูุงูุดูุงุณ ูุนุงููู ุจุงุฒ.
*   **ูุชุฏ:** `PUT`
*   **ุขุฏุฑุณ:** `/api/trades/{id}`
*   **ูุฏู ูุฑูุฏ (Body):**
    ```json
    {
      "tradeId": 50,
      "stopLoss": 44500, // ุงุฎุชุงุฑ
      "takeProfits": [47000], // ุงุฎุชุงุฑ
      "emotionBeforeEntry": "Excited" // ุงุฎุชุงุฑ
    }
    ```
*   **ุฎุฑูุฌ:** `TradeDto` ุขูพุฏุช ุดุฏู.

---

## 3. ุณุฑูุณ ุชุญูู ู ฺฏุฒุงุฑุดโฺฏุฑ (Analytics)

### **3.1. ุฎูุงุตู ุนููฺฉุฑุฏ ุฏูุฑู (Summary)**
*   **ุชูุถุญุงุช:** ุฏุฑุงูุช ุขูุงุฑูุง ฺฉูุฏ ุนููฺฉุฑุฏ ุฏุฑ ฺฉ ุฏูุฑู ูุงู.
*   **ูุชุฏ:** `GET`
*   **ุขุฏุฑุณ:** `/api/analytics/period/{periodId}/summary`
*   **ุฎุฑูุฌ (Response):**
    ```json
    {
      "financialPeriodId": 1,
      "winRate": 65.5,
      "expectancy": 1.5,
      "avgR": 2.1,
      "profitFactor": 2.5,
      "maxDrawdown": 4.0,
      "totalPnLPercent": 15.5,
      "totalTrades": 20,
      "winningTrades": 13,
      "losingTrades": 7,
      "breakEvenTrades": 0
    }
    ```

### **3.2. ุชุญูู ุฑูุชุงุฑ ูุนุงูููโฺฏุฑ (Behavior)**
*   **ุชูุถุญุงุช:** ุชุญูู ุขูุงุฑ ุฑูุชุงุฑ ูุนุงูููโฺฏุฑ (ุชุงู ูฺฏูุฏุงุฑุ ุงูุฑูุ ุฌูุช ูุนุงููุงุช).
*   **ูุชุฏ:** `GET`
*   **ุขุฏุฑุณ:** `/api/analytics/period/{periodId}/behavior`
*   **ุฎุฑูุฌ (Response):**
    ```json
    {
      "financialPeriodId": 1,
      "avgHoldingTime": "02:30:00",
      "avgLeverage": 10.5,
      "tradesBySide": {
        "Long": 12,
        "Short": 8
      },
      "tradesByReason": {
        "TargetHit": 10,
        "StopLossHit": 5,
        "ManualExit": 5
      }
    }
    ```

### **3.3. ุจูุด ููุดููุฏ (Insights)**
*   **ุชูุถุญุงุช:** ุฏุฑุงูุช ุชูุตูโูุง ู ูุดุฏุงุฑูุง ููุดููุฏ ุจุฑ ุงุณุงุณ ุนููฺฉุฑุฏ.
*   **ูุชุฏ:** `GET`
*   **ุขุฏุฑุณ:** `/api/analytics/period/{periodId}/insights`
*   **ุฎุฑูุฌ (Response):**
    ```json
    {
      "financialPeriodId": 1,
      "insights": [
        {
          "type": "Warning",
          "message": "Low plan compliance detected (70%). Stick to your trading plan to improve consistency.",
          "ruleName": "PlanCompliance"
        }
      ]
    }
    ```
